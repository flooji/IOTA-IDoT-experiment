<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Raspi ID-Manager</title>
  <meta name="description" content="Request Identity Claim">
  <meta name="author" content="flooji">
  <link rel="./main.css" type="text/css" href="style.css" media="screen" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script> 
  <!-- include socket.io client side script -->
</head>

<body>
    <h1>Hi, try the Raspberry Identity Manager:</h1>
    <button id="request">Request Identity claim and verify</button>
    <div id="output"></div>
    
    <script>
      import {  } from "module";
      const socket = io() //load socket.io-client and connect to the host that serves the page
      
      window.addEventListener("load", function(){ //when page loads
        let requestButton = document.getElementById("request")

        requestButton.addEventListener("click", function() { //add event listener for when button changes
        socket.emit("request")
        })
      })

      socket.on("response", function (success,token) { //get answer from client
        //verify token here ---------------- display response
        //token query handshake possible as well
        //verify(token)
        document.getElementById("output").innerHTML = success //display success
      })
    </script>
</body>
</html>